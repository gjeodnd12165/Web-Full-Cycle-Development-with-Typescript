### 쿠버네티스 서비스와 볼륨
#### 서비스
- 클러스터의 외부에서 클러스터에 접속하는 방법
    - 클러스터 내부에서 동작하는 기능을 외부로 "노출"하는 것을 서비스라고 부름

#### 클러스터 IP
- 클러스터 내부에서만 접근할 수 있는 IP를 할당
- 포트 포워딩 또는 프록시를 통해 클러스터 외부로부터 접근 가능
- 테스트, 디버깅 등의 목적에 제한적으로 이용

#### 노드포트
- 동작 방식
    - 모든 워커 노드의 특정 포트를 열고 여기로 오는 모든 요청을 노드포트 서비스에 할당
    - 노드포트 서비스는 해당 요청을 처리할 수 있는 포드로 요청을 전달

#### 로드 밸런서
- 클러스터 외부의 로드밸런서를 이용하여 부하 균등화 수행
- 노드포트와 달리 특정 노드가 접근 불가한 경우에도 서비스 제공 가능

#### 인그레스
- 엄밀히 말하자면 k8s 서비스의 한 종류는 아니고, 복수의 서비스에 대해 목적에 따라 트래픽을 연결하는 도구

#### 동적 수평 오토스케일링
- HPA
    - 부하량에 따라 디플로이먼트의 포드 수를 유동적으로 관리하는 k8s의 기능
        - (보통의 경우) 고려되는 부하량: CPU 및 메모리 사용량
    - 매트릭스 서버로부터 부하 계측값을 전달받아 동일한 기능을 제공하는 포드의 수를 동적으로 조절
- 스케일링 기준이 되는 값과 최소/최대 포드의 수를 지정

#### 볼륨
- k8s는 클러스터 내에서 이용할 수 이쓴ㄴ 저장장치의 추상화된 객체로 볼륨을 정의
- PV (PersistantVolume)
    - 클러스터 내에 존재하는 스토리지를 추상화한 것
    - 클러스터 내의 노드에 존재하는 물리적 저장장치를 이용할 수도 있으며, 다양한 원격 저장소 및 클라우드 서비스들도 이용할 수 있음
- PVC (PersistentVolumeClaim)
    - (사용자에 의한) PV를 이용하기 위한 요청
    - Pod:Node = PVC:PV
    - 저장 공간의 크기과 접근 모드를 지정

#### 볼륨 이용 실습
- 로컬 컴퓨터에 볼륨으로 생성할 디렉토리를 만들고 이 안에 테스트 파일 작성
- PV 생성
- PVC 생성
- nginx 웹 서버를 실행하는 포드 생성
- 웹 브라우저에서 결과 확인